{"ast":null,"code":"import _objectSpread from\"/Users/sergeymac/Web/React application /react-quiz(redux)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/sergeymac/Web/React application /react-quiz(redux)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sergeymac/Web/React application /react-quiz(redux)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/sergeymac/Web/React application /react-quiz(redux)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sergeymac/Web/React application /react-quiz(redux)/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import classes from'./Auth.module.scss';import Button from'../../components/UI/Button/Button';import Input from'../../components/UI/Input/Input';import{connect}from'react-redux';import{auth as _auth}from'../../store/actions/auth';function validateEmail(email){var re=/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;return re.test(String(email).toLowerCase());}var Auth=/*#__PURE__*/function(_Component){_inherits(Auth,_Component);var _super=_createSuper(Auth);function Auth(){var _this;_classCallCheck(this,Auth);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isFormValid:false,formControls:{email:{value:'',type:'email',label:'Email',errorMessage:'Введите корректный email',valid:false,touched:false,validation:{required:true,email:true}},password:{value:'',type:'password',label:'Пароль',errorMessage:'Введите корректный пароль',valid:false,touched:false,validation:{required:true,minLength:6}}}};_this.loginHandler=function(){_this.props.auth(_this.state.formControls.email.value,_this.state.formControls.password.value,true);};_this.registerHandler=function(){_this.props.auth(_this.state.formControls.email.value,_this.state.formControls.password.value,false);};_this.submitHandler=function(event){event.preventDefault();};_this.onChangeHandler=function(event,controlName){var formControls=_objectSpread({},_this.state.formControls);var control=_objectSpread({},formControls[controlName]);control.value=event.target.value;control.touched=true;control.valid=_this.validateControl(control.value,control.validation);formControls[controlName]=control;var isFormValid=true;Object.keys(formControls).forEach(function(name){isFormValid=formControls[name].valid&&isFormValid;});_this.setState({formControls:formControls,isFormValid:isFormValid});};return _this;}_createClass(Auth,[{key:\"validateControl\",value:function validateControl(value,validation){if(!validation){return true;}var isValid=true;if(validation.required){isValid=value.trim()!==''&&isValid;}if(validation.email){isValid=validateEmail(value)&&isValid;}if(validation.minLength){isValid=value.length>=validation.minLength&&isValid;}return isValid;}},{key:\"renderInputs\",value:function renderInputs(){var _this2=this;return Object.keys(this.state.formControls).map(function(controlName,index){var control=_this2.state.formControls[controlName];return/*#__PURE__*/React.createElement(Input,{key:controlName+index,type:control.type,value:control.value,valid:control.valid,touched:control.touched,label:control.label,shouldValidate:!!control.validation,errorMessage:control.errorMessage,onChange:function onChange(event){return _this2.onChangeHandler(event,controlName);}});});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:classes.Auth},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.submitHandler,className:classes.AuthForm},this.renderInputs(),/*#__PURE__*/React.createElement(Button,{type:\"sucsess\",onClick:this.loginHandler,disabled:!this.state.isFormValid},\"\\u0412\\u043E\\u0439\\u0442\\u0438\"),/*#__PURE__*/React.createElement(Button,{type:\"primary\",onClick:this.registerHandler,disabled:!this.state.isFormValid},\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"))));}}]);return Auth;}(Component);function mapDispatchToProps(dispatch){return{auth:function auth(email,password,isLogin){return dispatch(_auth(email,password,isLogin));}};}export default connect(null,mapDispatchToProps)(Auth);","map":{"version":3,"sources":["/Users/sergeymac/Web/React application /react-quiz(redux)/src/containers/Auth/Auth.js"],"names":["React","Component","classes","Button","Input","connect","auth","validateEmail","email","re","test","String","toLowerCase","Auth","state","isFormValid","formControls","value","type","label","errorMessage","valid","touched","validation","required","password","minLength","loginHandler","props","registerHandler","submitHandler","event","preventDefault","onChangeHandler","controlName","control","target","validateControl","Object","keys","forEach","name","setState","isValid","trim","length","map","index","AuthForm","renderInputs","mapDispatchToProps","dispatch","isLogin"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport classes from './Auth.module.scss'\nimport Button from '../../components/UI/Button/Button'\nimport Input from '../../components/UI/Input/Input'\nimport {connect} from 'react-redux'\nimport {auth} from '../../store/actions/auth'\n\n\nfunction validateEmail(email) {\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n}\n\nclass Auth extends Component {\n\n\tstate = {\n\t\tisFormValid: false,\n\t\tformControls: {\n\t\t\temail: {\n\t\t\t\tvalue: '',\n\t\t\t\ttype: 'email',\n\t\t\t\tlabel: 'Email',\n\t\t\t\terrorMessage: 'Введите корректный email',\n\t\t\t\tvalid: false,\n\t\t\t\ttouched: false,\n\t\t\t\tvalidation: {\n\t\t\t\t\trequired: true,\n\t\t\t\t\temail: true\n\t\t\t\t}\n\t\t\t},\n\t\t\tpassword: {\n\t\t\t\tvalue: '',\n\t\t\t\ttype: 'password',\n\t\t\t\tlabel: 'Пароль',\n\t\t\t\terrorMessage: 'Введите корректный пароль',\n\t\t\t\tvalid: false,\n\t\t\t\ttouched: false,\n\t\t\t\tvalidation: {\n\t\t\t\t\trequired: true,\n\t\t\t\t\tminLength: 6\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t}\n    \n    loginHandler = () => {\n        this.props.auth(\n            this.state.formControls.email.value,\n            this.state.formControls.password.value,\n            true\n        )\n    }\n\n    registerHandler = () => {\n        this.props.auth(\n            this.state.formControls.email.value,\n            this.state.formControls.password.value,\n            false\n        )\n        \n\n    }\n    \n    submitHandler = event => {\n    \tevent.preventDefault()\n    }\n    \n    validateControl(value, validation) {\n    \tif (!validation) {\n    \t\treturn true \n    \t}\n\n    \tlet isValid = true\n\n    \tif (validation.required) {\n    \t\tisValid = value.trim() !== '' && isValid\n    \t}\n\n    \tif (validation.email) {\n    \t\tisValid = validateEmail(value) && isValid\n    \t}\n\n    \tif (validation.minLength) {\n    \t\tisValid = value.length >= validation.minLength && isValid\n\n    \t}\n\n    \treturn isValid\n\n    }\n\n    onChangeHandler = (event, controlName) => {\n        const formControls = { ...this.state.formControls }\n        const control = { ...formControls[controlName] }\n\n        control.value = event.target.value\n        control.touched = true\n        control.valid = this.validateControl(control.value, control.validation)\n\n        formControls[controlName] = control\n\n        let isFormValid = true\n\n        Object.keys(formControls).forEach(name => {\n        \tisFormValid = formControls[name].valid && isFormValid\n        })\n\n\n\n        this.setState({\n        \tformControls, isFormValid\n        })\n    }   \n\n    renderInputs() {\n    \treturn Object.keys(this.state.formControls).map((controlName, index) => {\n    \t\tconst control = this.state.formControls[controlName]\n            return (\n            \t<Input\n            \t  key={controlName + index}\n            \t  type={control.type}\n            \t  value={control.value}\n            \t  valid={control.valid}\n            \t  touched={control.touched}\n            \t  label={control.label}\n            \t  shouldValidate={!!control.validation}\n            \t  errorMessage={control.errorMessage}\n            \t  onChange={event => this.onChangeHandler(event, controlName)}\n            \t/>\n            )\n    \t})\n    }\n\n\trender() {\n\t\treturn (\n\t\t\t<div className={classes.Auth}>\n\t\t\t  <div>\n                <h1>Авторизация</h1>\n                <form onSubmit={this.submitHandler} className={classes.AuthForm}>\n                  \n                  { this.renderInputs() } \n\n                  <Button \n                    type=\"sucsess\" \n                    onClick={this.loginHandler}\n                    disabled={!this.state.isFormValid}\n                  >\n                    Войти\n                  </Button>\n\n                  <Button \n                    type=\"primary\" \n                    onClick={this.registerHandler}\n                    disabled={!this.state.isFormValid}\n                  >\n                    Зарегистрироваться\n                  </Button>\n                </form>\n\t\t\t  </div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        auth: (email, password, isLogin) => dispatch(auth(email, password, isLogin))\n    }\n}\n\nexport default connect(null, mapDispatchToProps)(Auth)"]},"metadata":{},"sourceType":"module"}